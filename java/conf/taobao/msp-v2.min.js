function G_setImgSrc(a, b) {
    if (a) {
        b && (b = ["_", b, ".jpg"].join(""));
        var c = a.lastIndexOf("_."),
            d = -1 != c ? a.slice(c + 2) : null,
            e = d && "webp" == d.toLowerCase() ? !0 : !1,
            f = e ? a.slice(0, c) : a,
            g = f.replace(/_\d+x\d+\.jpg?/g, "");
        return b && (g += b), e && g + "_.webp" || g
    }
}

function G_bottomhtml() {
    var a = "http://shop" + G_msp_shopId + ".taobao.com",
        b = "http://shop" + G_msp_shopId + ".m.taobao.com/?v=1";
    return lib.bottom.footer.getFooterTemplate(a, b)
}

function G_logStatis(a, b) {
    var a = a || location.origin;
    $.ajax({
        aplus: !0,
        ap_uri: a + "/?#" + b
    })
}
var templates = {};
templates.comments_item = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.s(d.f("rateList", a, b, 1), a, b, 0, 13, 272, "{{ }}") && (d.rs(a, b, function (a, b, d) {
        d.b('<li class="item">'), d.b("\n" + c), d.b('    <a class="title omit" href="http://a.m.taobao.com/i'), d.b(d.v(d.f("auctionNumId", a, b, 0))), d.b('.htm">'), d.b(d.v(d.f("auctionTitle", a, b, 0))), d.b("</a>"), d.b("\n" + c), d.b('    <p class="text">'), d.b(d.v(d.f("rateContent", a, b, 0))), d.b("</p>"), d.b("\n" + c), d.b('    <p class="user"><span>'), d.b(d.v(d.f("displayUserNick", a, b, 0))), d.b('</span><span class="date">'), d.b(d.v(d.f("rateDate", a, b, 0))), d.b("</span></p>\r"), d.b("\n" + c), d.b("</li>"), d.b("\n")
    }), a.pop()), d.s(d.f("rateList", a, b, 1), a, b, 1, 0, 0, "") || (d.b('<li style="height:300px;line-height:300px;text-align:center;">暂无评论~</li>'), d.b("\n")), d.fl()
}), templates.comments_nav = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.b('<li class="sel" s="2" n="1">全部</li> \r'), d.b("\n" + c), d.b('                <li s="1" n="'), d.b(d.v(d.f("good", a, b, 0))), d.b('">好评'), d.b(d.v(d.f("good", a, b, 0))), d.b("</li> \r"), d.b("\n" + c), d.b('                <li s="0" n="'), d.b(d.v(d.f("mid", a, b, 0))), d.b('">中评'), d.b(d.v(d.f("mid", a, b, 0))), d.b("</li> \r"), d.b("\n" + c), d.b('                <li s="-1" n="'), d.b(d.v(d.f("bad", a, b, 0))), d.b('">差评'), d.b(d.v(d.f("bad", a, b, 0))), d.b("</li>"), d.fl()
}), templates.goods_list_item = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.s(d.f("itemsArray", a, b, 1), a, b, 0, 15, 679, "{{ }}") && (d.rs(a, b, function (a, b, d) {
        d.b("            <li> "), d.b("\n" + c), d.b('                <a href="http://a.m.taobao.com/i'), d.b(d.v(d.f("auctionId", a, b, 0))), d.b('.htm">'), d.b("\n" + c), d.b('                    <div class="left"> <img class="lazyimg" dataimg="'), d.b(d.v(d.f("picUrl", a, b, 0))), d.b('" src="http://a.tbcdn.cn/mw/webapp/fav/img/grey.gif" /> </div>'), d.b("\n" + c), d.b('                    <div class="right">'), d.b("\n" + c), d.b('                        <h3 class="d-title">'), d.b(d.v(d.f("title", a, b, 0))), d.b("</h3>                            "), d.b("\n" + c), d.b('                        <p class="d-price"><em class="h">'), d.b(d.v(d.f("salePrice", a, b, 0))), d.b("</em> <del>"), d.b(d.v(d.f("reservePrice", a, b, 0))), d.b("</del> </p>"), d.b("\n" + c), d.b('                        <p class="info"> <span class="d-num">月售<em>'), d.b(d.v(d.f("sold", a, b, 0))), d.b('</em>笔</span><span class="d-area"></span></p>'), d.b("\n" + c), d.b("                    </div>"), d.b("\n" + c), d.b("                </a>"), d.b("\n" + c), d.b("            </li>"), d.b("\n")
    }), a.pop()), d.s(d.f("itemsArray", a, b, 1), a, b, 1, 0, 0, "") || (d.b('            <li style="display:block;height:200px;line-height:200px;text-align:center;">未找到符合的宝贝</li>'), d.b("\n")), d.fl()
}), templates.index_recent_view = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.b("<!-- 最近浏览 -->"), d.b("\n" + c), d.b('        <div class="js-rv recent-view-wrap clearfix">\r'), d.b("\n" + c), d.b('            <div class="js-rv-des rv-des">\r'), d.b("\n" + c), d.b('                <div class="arrl"></div>\r'), d.b("\n" + c), d.b('                <div class="txt">最近浏览(<span class="js-rv-num">'), d.b(d.v(d.f("len", a, b, 0))), d.b("</span>)</div>\r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b('            <div class="rv-slider">\r'), d.b("\n" + c), d.b('                <div class="rv-slider-outer">\r'), d.b("\n" + c), d.b('                    <ul class="rv-slider-wrap">\r'), d.b("\n" + c), d.s(d.f("rvList", a, b, 1), a, b, 0, 428, 568, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b('                        <li><a href="http://a.m.taobao.com/i'), c.b(c.v(c.f("auctionId", a, b, 0))), c.b('.htm"><img src="'), c.b(c.v(c.f("picUrl", a, b, 0))), c.b('" /></a></li>\r'), c.b("\n")
    }), a.pop()), d.b('                        <!--<li><a href="javascript:;"><img src="http://q.i03.wimg.taobao.com/bao/uploaded/i2/18557025864159324/T1Gj0WFf4fXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i02.wimg.taobao.com/bao/uploaded/i2/10528024135022620/T1m414XpBcXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i01.wimg.taobao.com/bao/uploaded/i1/17863026293022852/T15hX9FbxfXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i03.wimg.taobao.com/bao/uploaded/i2/18557025864159324/T1Gj0WFf4fXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i02.wimg.taobao.com/bao/uploaded/i2/10528024135022620/T1m414XpBcXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i03.wimg.taobao.com/bao/uploaded/i2/18557025864159324/T1Gj0WFf4fXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>\r'), d.b("\n" + c), d.b('                        <li><a href="javascript:;"><img src="http://q.i02.wimg.taobao.com/bao/uploaded/i2/10528024135022620/T1m414XpBcXXXXXXXX_!!0-item_pic.jpg_90x90.jpg" alt="" /></a></li>-->\r'), d.b("\n" + c), d.b("                    </ul>                    \r"), d.b("\n" + c), d.b("                </div>\r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b("        </div>"), d.fl()
}), templates.shop_cates = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.b('<div class="shop-cates-layer">'), d.b("\n" + c), d.b('        <div class="sc-title">分类/搜索</div>'), d.b("\n" + c), d.b('        <div class="js-sc-main sc-main">'), d.b("\n" + c), d.b('            <form class="js-s-form search">'), d.b("\n" + c), d.b('                <div class="s-box">\r'), d.b("\n" + c), d.b('                    <input type="submit" class="js-s-submit s-submit" value="" />'), d.b("\n" + c), d.b('                    <input type="text" class="js-s-txt s-txt" name="name" value="" placeholder="搜索本店商品" />\r'), d.b("\n" + c), d.b("                </div>"), d.b("\n" + c), d.b("            </form>"), d.b("\n" + c), d.b("\n" + c), d.b('            <ul class="menu">'), d.b("\n" + c), d.b("                <li>"), d.b("\n" + c), d.b('                    <h2 class="title">'), d.b("\n" + c), d.b('                        <span class="js-sc-m-title big-title omit" data-id="">所有宝贝</span>\r'), d.b("\n" + c), d.b("                    </h2>"), d.b("\n" + c), d.b("                </li>"), d.b("\n" + c), d.s(d.f("cats", a, b, 1), a, b, 0, 683, 1322, "{{ }}") && (d.rs(a, b, function (a, b, d) {
        d.b("                <li>"), d.b("\n" + c), d.b('                    <h2 class="title">'), d.b("\n" + c), d.b('                        <span class="js-sc-m-title big-title omit" data-id="'), d.b(d.v(d.f("id", a, b, 0))), d.b('">'), d.b(d.v(d.f("name", a, b, 0))), d.b("</span>\r"), d.b("\n" + c), d.b("                        "), d.s(d.f("hasSubCats", a, b, 1), a, b, 0, 884, 932, "{{ }}") && (d.rs(a, b, function (a, b, c) {
            c.b('<span class="js-sc-arr sc-arr arr arr-d"></span>')
        }), a.pop()), d.b("\r"), d.b("\n" + c), d.b("                    </h2>"), d.b("\n" + c), d.s(d.f("hasSubCats", a, b, 1), a, b, 0, 1010, 1268, "{{ }}") && (d.rs(a, b, function (a, b, d) {
            d.b('                    <ul class="sub-menu">'), d.b("\n" + c), d.s(d.f("subCats", a, b, 1), a, b, 0, 1089, 1209, "{{ }}") && (d.rs(a, b, function (a, b, c) {
                c.b('                        <li class="js-sc-m-title sub-item omit" data-id="'), c.b(c.v(c.f("id", a, b, 0))), c.b('">'), c.b(c.v(c.f("name", a, b, 0))), c.b("</li>"), c.b("\n")
            }), a.pop()), d.b("                    </ul>"), d.b("\n")
        }), a.pop()), d.b("                </li>"), d.b("\n")
    }), a.pop()), d.b("            </ul>"), d.b("\n" + c), d.b("        </div>"), d.b("\n" + c), d.b("    </div>"), d.fl()
}), templates.shop_info = new Hogan.Template(function (a, b, c) {
    var d = this;
    return d.b(c = c || ""), d.b('<div class="shop-info">\r'), d.b("\n" + c), d.b('        <div class="si-title">店铺信息</div>\r'), d.b("\n" + c), d.b('        <div class="js-si-main si-main">\r'), d.b("\n" + c), d.b('            <div class="si-base-info" data-id="'), d.b(d.v(d.f("id", a, b, 0))), d.b('">\r'), d.b("\n" + c), d.b('                <div class="left"> <img id="js-si-img-logo" src="'), d.b(d.v(d.f("picUrl", a, b, 0))), d.b('" alt="" /> </div>'), d.b("\n" + c), d.b('                <div class="right">'), d.b("\n" + c), d.b('                    <h3 class="sp-name">'), d.b(d.v(d.f("title", a, b, 0))), d.b("</h3>"), d.b("\n" + c), d.b('                    <p class="sp-time"> <span class="des">创店时间：</span><span class="sp-t">'), d.b(d.v(d.f("starts", a, b, 0))), d.b("</span></p>"), d.b("\n" + c), d.b("                </div>\r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b('            <div class="si-base-info1">\r'), d.b("\n" + c), d.b("                <ul>\r"), d.b("\n" + c), d.b('                    <li><span class="des">宝贝数量</span><span class="r">'), d.b(d.v(d.f("productCount", a, b, 0))), d.b("</span></li>\r"), d.b("\n" + c), d.b('                    <li><span class="des">收藏人气</span><span class="r">'), d.b(d.v(d.f("collectorCount", a, b, 0))), d.b("</span></li>\r"), d.b("\n" + c), d.b("                    "), d.s(d.f("tmallnotshow", a, b, 1), a, b, 0, 806, 900, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b('<li><span class="des">好评率</span><span class="r">'), c.b(c.v(c.d("shopDSRScore.sellerGoodPercent", a, b, 0))), c.b("</span></li>")
    }), a.pop()), d.b("\r"), d.b("\n" + c), d.b('                    <li><span class="des">地区</span><span class="r">'), d.b(d.v(d.f("prov", a, b, 0))), d.b(" "), d.b(d.v(d.f("city", a, b, 0))), d.b("</span></li>\r"), d.b("\n" + c), d.b("                </ul>\r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b('            <div class="si-base-info2">\r'), d.b("\n" + c), d.b('                <div class="zg"><span class="des">掌柜名</span><a class="js-ww-btn i2-btn" href="http://h5.m.taobao.com/ww/index.htm#!dialog-'), d.b(d.v(d.f("enick", a, b, 0))), d.b('">\r'), d.b("\n" + c), d.b('                    <span class="m name omit">'), d.b(d.v(d.f("nick", a, b, 0))), d.b('</span><span class="r ww-icon"><img src="http://im.wapa.taobao.com/ww/status.do?_input_charset=utf-8&nick='), d.b(d.v(d.f("nick", a, b, 0))), d.b('" alt="" /></span></a></div>\r'), d.b("\n" + c), d.b("                "), d.s(d.f("hasPhone", a, b, 1), a, b, 0, 1479, 1656, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b('<div class="contact"><span class="des">电话</span><a class="js-phone-btn i2-btn" href="tel:'), c.b(c.v(c.f("phone", a, b, 0))), c.b('"><span class="m num">'), c.b(c.v(c.f("phone", a, b, 0))), c.b('</span><span class="r dh-icon"></span></a></div>')
    }), a.pop()), d.b(" \r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b('            <div class="si-base-info3">\r'), d.b("\n" + c), d.b('                <p class="ms"><span class="des">描述相符</span><span class="num">'), d.b(d.v(d.d("shopDSRScore.merchandisScore", a, b, 0))), d.b('</span><span class="range '), d.s(d.d("mg.green", a, b, 1), a, b, 0, 1881, 1884, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b("low")
    }), a.pop()), d.b('">'), d.b(d.v(d.d("mg.data", a, b, 0))), d.b("</span></p>\r"), d.b("\n" + c), d.b('                <p class="fw"><span class="des">服务态度</span><span class="num">'), d.b(d.v(d.d("shopDSRScore.serviceScore", a, b, 0))), d.b('</span><span class="range '), d.s(d.d("sg.green", a, b, 1), a, b, 0, 2068, 2071, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b("low")
    }), a.pop()), d.b('">'), d.b(d.v(d.d("sg.data", a, b, 0))), d.b("</span></p>\r"), d.b("\n" + c), d.b('                <p class="fh"><span class="des">发货速度</span><span class="num">'), d.b(d.v(d.d("shopDSRScore.consignmentScore", a, b, 0))), d.b('</span><span class="range '), d.s(d.d("cg.green", a, b, 1), a, b, 0, 2259, 2262, "{{ }}") && (d.rs(a, b, function (a, b, c) {
        c.b("low")
    }), a.pop()), d.b('">'), d.b(d.v(d.d("cg.data", a, b, 0))), d.b("</span></p>\r"), d.b("\n" + c), d.b("            </div>\r"), d.b("\n" + c), d.b("        </div>\r"), d.b("\n" + c), d.b("    </div>"), d.fl()
}), Function.prototype.bind || (Function.prototype.bind = function (a) {
    var b = this,
        c = Array.prototype.slice;
    if ("function" != typeof b) throw new TypeError("Function.prototype.bind called on incompatible " + b);
    var d = c.call(arguments, 1),
        e = function () {
            if (this instanceof e) {
                var f = function () {};
                f.prototype = b.prototype;
                var g = new f,
                    h = b.apply(g, d.concat(c.call(arguments)));
                return Object(h) === h ? h : g
            }
            return b.apply(a, d.concat(c.call(arguments)))
        };
    return e
}), $.fn.slideDown = function (a) {
    var b = $(this),
        c = {
            callback: function () {},
            ease: "linear",
            anitime: .3
        };
    $.extend(c, a), b.wrap('<div style="height:1px; overflow:hidden"></div>'), b.show();
    var d = b.height();
    return b.parent().anim({
        height: d
    }, c.anitime, c.ease, function () {
        $(this).children().first().unwrap("<div></div>"), c.callback()
    }), this
}, $.fn.slideUp = function (a) {
    var b = {
        callback: function () {},
        ease: "linear",
        anitime: .3
    };
    $.extend(b, a);
    var c = $(this).height();
    return $(this).wrap('<div style="overflow:hidden"></div>'), $(this).parent().height(c).css("overflow", "hidden"), $(this).parent().anim({
        height: "1px"
    }, b.anitime, b.ease, function () {
        $(this).children().hide(), $(this).children().unwrap("<div></div>"), b.callback()
    }), this
};
var G_in_server = !1;
location.host.match(".*(waptest|wapa|m)\\.(taobao|tmall|etao|alibaba|alipay|aliyun)\\.com.*") && (G_in_server = !0);
var G_isIos = $.os.ios && parseFloat($.os.version) >= 5,
    G_isPad = $.os.ipad,
    G_loading = '<div style="display:block;height:300px;line-height:300px;text-align:center;"><img src="http://a.tbcdn.cn/mw/base/styles/component/more/images/loading.gif" /></div>',
    G_msp_not_show_info = "undefined" != typeof G_msp_show_info && !G_msp_show_info,
    G_msp_not_show_search = "undefined" != typeof G_msp_show_search && !G_msp_show_search,
    G_msp_not_show_comments = "undefined" != typeof G_msp_show_comments && !G_msp_show_comments;
! function () {
    for (var a, b, c = location.search.slice(1).split("&"), d = !1, e = 0; e < c.length; e++)
        if (a = c[e].split("="), "ttid" == a[0]) {
            try {
                b = decodeURIComponent(a[1] || "")
            } catch (f) {
                b = a[1] || ""
            }
            b.indexOf("@") > -1 && (d = !0)
        }
    window.SmartbannerJSON && (SmartbannerJSON.mainShop.href = SmartbannerJSON.mainShop.href + "?shop_id=" + G_msp_shopId, lib.smartbanner(SmartbannerJSON.mainShop))
}(), $(document.body).append('<div id="bottom">' + G_bottomhtml() + "</div>"), $(document).on("click", ".js-ww-btn", function () {
    G_logStatis("", "click_shop_aliwangwang")
}).on("click", ".js-phone-btn", function () {}), app.config.enableMessageLog = !1, app.config.enableNavbar = !1, app.config.enableToolbar = !1, app.config.enableScroll = !1, app.config.templateEngine = {
    load: function (a, b) {
        $.get(a, b)
    }
}, app.config.enableTransition = G_isPad ? !1 : !0,
function () {
    var a = function (a, b, c) {
        var d = a.api,
            e = $.extend({
                shopId: G_msp_shopId
            }, a),
            f = a.v || "1.0";
        delete e.api, delete e.v, lib.mtop.request({
            api: d,
            v: f,
            data: e
        }, function (a) {
            b(a)
        }, function (a) {
            c(a)
        })
    }, b = {
            ajax: function (b, c, d) {
                function e(a) {
                    var a = a.data,
                        b = g.dataOpe(a),
                        d = templates.shop_cates && templates.shop_cates.render(b);
                    g.cacheData = {
                        ndata: b,
                        html: d
                    }, c && c(b, d)
                }

                function f(a) {
                    d && d(a)
                }
                var g = this,
                    b = $.extend({
                        api: "com.taobao.search.api.getCatInfoInShop"
                    }, b);
                G_in_server ? g.cacheData ? c(g.cacheData.ndata, g.cacheData.html) : a(b, e, f) : mspCatesData && e(mspCatesData)
            },
            dataOpe: function (a) {
                return a.cats.forEach(function (a) {
                    var b = a.subCats;
                    a.hasSubCats = b.length ? !0 : !1
                }), a
            },
            cacheData: "",
            action: function (a) {
                var b = $(a) || $(document);
                b.on("click", ".js-sc-arr", function (a) {
                    var b = $(a.currentTarget);
                    if (b.hasClass("arr")) {
                        var c = b.parent().siblings(".sub-menu");
                        b.hasClass("arr-d") ? c.slideUp({
                            callback: function () {
                                b.removeClass("arr-d"), b.addClass("arr-r")
                            }
                        }) : (c.removeClass("none"), c.slideDown({
                            callback: function () {
                                b.removeClass("arr-r"), b.addClass("arr-d")
                            }
                        }))
                    }
                })
            }
        }, c = {
            ajax: function (b, c, d) {
                function e(a) {
                    var a = a.data,
                        b = g.dataOpe(a),
                        d = templates.shop_info && templates.shop_info.render(b);
                    g.cacheData = {
                        ndata: b,
                        html: d
                    }, c && c(b, d)
                }

                function f(a) {
                    d && d(a)
                }
                var g = this,
                    b = $.extend({
                        api: "mtop.shop.getWapShopInfo"
                    }, b);
                G_in_server ? g.cacheData ? c(g.cacheData.ndata, g.cacheData.html) : a(b, e, f) : mspInfoData && e(mspInfoData)
            },
            dataOpe: function (a) {
                var b = function (a) {
                    var b = parseFloat(a);
                    a = b > 0 ? "高于同行 " + b + "%" : 0 == b ? "持平 ---" : "低于同行 " + -b + "%";
                    var c = !1;
                    return 0 > b && (c = !0), {
                        data: a,
                        green: c
                    }
                };
                a.starts = a.starts.split(" ")[0], a.phone && (a.hasPhone = !0), a.tmallnotshow = "true" == a.isMall ? !1 : !0, a.enick = lib.encode.base64_utf8.encode(a.nick), a.picUrl = $(".js-msp-logo").find("img").attr("src");
                var c = a.shopDSRScore;
                return a.mg = b(c.mg), a.cg = b(c.cg), a.sg = b(c.sg), a
            },
            cacheData: ""
        }, d = {
            ajax: function (b, c, d) {
                function e(a) {
                    var a = a.data,
                        b = g.dataOpe(a);
                    g.cacheData = {
                        data: a,
                        ndata: b
                    }, c && c(a, b)
                }

                function f(a) {
                    d && d(a)
                }
                var g = this,
                    b = $.extend({
                        api: "com.taobao.wireless.shop.feedback.sum"
                    }, b);
                G_in_server ? g.cacheData ? c(g.cacheData.data, g.cacheData.ndata) : a(b, e, f) : e({
                    data: {
                        goodSeller: 0,
                        neutralSeller: 0,
                        badSeller: 0
                    }
                })
            },
            dataOpe: function (a) {
                var b = {
                    good: parseInt(a.goodSeller),
                    mid: parseInt(a.neutralSeller),
                    bad: parseInt(a.badSeller)
                };
                return b.good > 999 && (b.good = "999+"), b.mid > 999 && (b.mid = "999+"), b.bad > 999 && (b.bad = "999+"), b
            },
            renderC: function (a) {
                var b = parseInt(a.goodSeller) + parseInt(a.neutralSeller) + parseInt(a.badSeller) || 0,
                    c = '<ul class="shop-info-comm-num"><li><a id="goComments" href=""><span class="icon"></span><span class="txt">店铺评价</span><span class="num ced5">' + b + '</span><span class="arr"><i class="aw a-r"></i></span></a>' + "</li></ul>";
                return c
            }
        }, e = {
            ajax: function (b, c, d) {
                function e(a) {
                    var a = a.data.html;
                    g.cacheData = a, c && c(a)
                }

                function f(a) {
                    d && d(a)
                }
                var g = this,
                    b = $.extend({
                        api: "com.taobao.wireless.shop.yyzs.index.html",
                        page: "0",
                        pageSize: "0"
                    }, b);
                G_in_server ? g.cacheData ? c(g.cacheData) : a(b, e, f) : templates.index_pg && e({
                    data: {
                        html: templates.index_pg.render()
                    }
                })
            },
            cacheData: ""
        }, f = {
            ajax: function (b, c, d) {
                function e(a) {
                    var d = g.dataOpe(a.data),
                        e = g.cacheData,
                        f = b.rateResult;
                    e[f] ? e[f][h] = d : (e[f] = {}, e[f][h] = d), c && c(e)
                }

                function f(a) {
                    d && d(a)
                }
                var g = this,
                    b = $.extend({
                        api: "mtop.shop.getsellerRate",
                        pageSize: "10"
                    }, b),
                    h = "" + b.pageNo;
                G_in_server ? g.cacheData && g.cacheData[b.rateResult] && g.cacheData[b.rateResult][h] ? c(g.cacheData) : a(b, e, f) : commentsList && e(commentsList)
            },
            dataOpe: function (a) {
                var b = this;
                return a.rateList.forEach(function (a) {
                    a.rateDate = b.dateFormat(a.rateDate)
                }), a
            },
            dateFormat: function (a) {
                var b = new Date,
                    c = function (a) {
                        return String(a).replace(/^(\d)$/, "0$1")
                    }, d = b.getFullYear() + "-" + c(b.getMonth() + 1) + "-" + c(b.getDate() - 1),
                    e = b.getFullYear() + "-" + c(b.getMonth() + 1) + "-" + c(b.getDate()),
                    f = a.split(" ")[0].replace(/\./g, "-");
                return f == e ? "今天" : f == d ? "昨天" : f
            },
            cacheData: {}
        }, g = {
            ajax: function (b, c, d) {
                function e(a) {
                    var b = a.data;
                    c && c(b)
                }

                function f(a) {
                    d && d(a)
                }
                var g, b = $.extend({
                        api: "com.taobao.search.api.getShopItemList",
                        v: "2.0",
                        currentPage: 1,
                        pageSize: "30"
                    }, b);
                "" + b.currentPage, b.hasOwnProperty("q") && (g = "q"), b.hasOwnProperty("catId") && (g = "catId"), G_in_server ? a(b, e, f) : goodsList && e(goodsList)
            },
            cacheData: {
                q: {
                    oldstarts: {},
                    hotsell: {},
                    bid: {},
                    _bid: {},
                    isPromotion: {}
                },
                catId: {
                    oldstarts: {},
                    hotsell: {},
                    bid: {},
                    _bid: {},
                    isPromotion: {}
                }
            }
        };
    window.msp = {
        ajax: a,
        cates: b,
        info: c,
        commNum: d,
        index_html: e,
        comments_list: f,
        goods_list: g
    }
}(window.app),
function (a) {
    "use strict";

    function b(b) {
        var d = this.op = {
            container: c,
            mask: !0,
            content: "",
            wrapId: "popLayerWrap",
            fixed: !1,
            minHeight: 480,
            onHide: function () {},
            onShow: function () {}
        };
        return a.extend(d, b), a("#" + d.warpId).length ? (console.log("[error] This page already have the element [" + d.warpId + "]"), void 0) : (a(d.container).length || (this.op.container = c), this.init(), void 0)
    }
    var c = document.body;
    a.extend(b.prototype, {
        init: function () {
            var b = this,
                d = this.op,
                e = this.wrapDiv = a('<div id="' + d.wrapId + '" class="pop-layer-wrap" style="display:none;"></div>'),
                f = this.content = a('<div class="js-pop-layer pop-layer">' + d.content + "</div>"),
                g = this.mask = a('<div class="' + d.wrapId + '-mask pop-layer-mask"></div>');
            e.append(f);
            var h = a(d.container);
            if (h.append(e), d.mask && (e.append(g), g.on("click", function () {
                b.hide.apply(b)
            })), d.fixed) {
                this.content.addClass("scrollable");
                var i = a('<div id="ios5_fixed_bug_ele"></div>'),
                    j = a(c);
                j.append(i), this.ios5_fixed_bug_ele = i;
                var k = d.minHeight;
                e.css({
                    "min-height": k,
                    position: "fixed",
                    bottom: 0
                }), f.css({
                    "min-height": k,
                    position: "fixed",
                    bottom: 0,
                    overflow: "auto"
                }), g.css("min-height", k)
            }
        },
        refresh: function (b) {
            var d = this;
            if (!d.op.fixed) {
                var e = this.wrapDiv,
                    f = e.css("display"),
                    g = e.find(b),
                    h = g.css("display"),
                    i = g.height();
                "none" == f.substr(0, 4) && (e.addClass("blockimp"), "none" == h.substr(0, 4) ? (g.addClass("blockimp"), i = g.height(), g.removeClass("blockimp")) : i = g.height(), e.removeClass("blockimp"));
                var j = a(c).height(),
                    i = parseFloat(i);
                i > j && (j = i), j += 20, d.content.css("height", j), d.wrapDiv.css("height", j)
            }
        },
        show: function (a) {
            var b = this;
            this.wrapDiv.show(), this.content.addClass("stopflick"), a && this.refresh(a), b.op.mask && b.mask.show(), this.translation(this.content[0], {
                x: 0
            }, function () {
                b.content.addClass("open3d"), b.op.onShow(), b.wrapDiv.attr("p_show", "show")
            })
        },
        hide: function () {
            var a = this;
            a.op.mask && a.mask.hide(), this.translation(this.content[0], {
                x: 280,
                duration: "0.4s"
            }, function () {
                a.content.removeClass("stopflick");
                var b = a.content[0].style;
                b.webkitBackfaceVisibility = "", b.webkitTransform = "", b.webkitTransformStyle = "", a.op.fixed && a.content.removeClass("open3d"), a.wrapDiv.hide(), a.op.onHide(), a.wrapDiv.attr("p_show", "hide")
            })
        },
        translation: function (b, c, d) {
            var e = a.extend({
                duration: "0.4s",
                origin: "0 0"
            }, c || {}),
                f = b.style;
            !f.webkitTransitionProperty && (f.webkitTransitionProperty = "-webkit-transform"), f.webkitTransitionDuration !== e.duration && (f.webkitTransitionDuration = e.duration), f.webkitTransformOrigin !== e.origin && (f.webkitTransformOrigin = e.origin), "hidden" !== f.webkitBackfaceVisibility && (f.webkitBackfaceVisibility = "hidden"), "preserve-3d" !== f.webkitTransformStyle && (f.webkitTransformStyle = "preserve-3d"), (null != e.x || null != e.y) && (f.webkitTransform = "translate(" + (e.x ? e.x + "px," : "0,") + (e.y ? e.y + "px" : "0") + ")", setTimeout(d, 1500 * parseFloat(e.duration)))
        },
        content_destroy: function () {
            this.content.off()
        },
        destroy: function () {
            this.content.off(), this.op.mask && this.mask.off()
        }
    }), window.PopLayer = b
}($),
function (a) {
    "use strict";
    var b, c = a(document.body),
        d = function (b) {
            var c = a(b.target);
            c.parents(".js-pop-layer").length || b.preventDefault()
        };
    b = G_isIos ? new PopLayer({
        mask: !0,
        fixed: !0,
        minHeight: 400,
        content: "",
        onHide: function () {
            c.off("touchmove", d)
        },
        onShow: function () {
            b.ios5_fixed_bug_ele.css("height", "200px"), setTimeout(function () {
                b.ios5_fixed_bug_ele.css("height", "0")
            }, 100), c.on("touchmove", d)
        }
    }) : new PopLayer({
        mask: !0,
        content: "",
        onHide: function () {
            window.scrollTo(0, 1)
        }
    });
    var e = ['<div class="shop-filter">', '<div class="sf-title">价格区间</div>', '<div class="sf-main">', '<form class="js-filter-form">', '<div class="condi">', '<input class="js-start-price inp" type="text" placeholder="最低价" value="" />元 ~', '<input class="js-end-price inp" type="text" placeholder="最高价" value="" />元', "</div>", '<div class="finish">', '<input class="js-filter-submit fin-btn" type="submit" value="完成" />', "</div>", "</form>", "</div>", "</div>"].join("");
    b.content.append('<div class="js-shop-cates-flag js-scroll-ele shop-cates-flag none">' + G_loading + "</div>").append('<div class="js-shop-info-flag js-scroll-ele shop-info-flag none"><div class="js-shop-info">' + G_loading + "</div>" + '<div class="js-shop-c"></div>' + "</div>").append(a('<div class="js-shop-filter-flag js-scroll-ele shop-filter-flag none">' + e + "</div>")), window.G_popLayer = b
}($),
function (a, b) {
    function c(a) {
        var b = j.find(a);
        b.hasClass("none") && (b.removeClass("none"), b.siblings().addClass("none"))
    }

    function d(a) {
        if (G_popLayer.hide(), window.G_pg_name && "goodsList" == window.G_pg_name) {
            var c = app.getPage("list"),
                a = c.format_url(a);
            c.change_state(a), c.urlData = a, b.goods_list.ajax(a, function (a) {
                c.renderItem(a, "init")
            })
        } else app.navigation.push("list", {
            type: "GET",
            data: a
        })
    }

    function e() {
        !b.info.cacheData && b.info.ajax({}, function (a, b) {
            k.html(b), G_popLayer.refresh(".js-shop-info-flag")
        }, function () {
            console.log("店铺信息数据出了点小问题~~")
        }), !G_msp_not_show_comments && !b.commNum.cacheData && b.commNum.ajax({}, function (c) {
            l.html(b.commNum.renderC(c)), a("#goComments").on("click", function (a) {
                a.preventDefault(), app.navigation.push("comments", {
                    type: "GET",
                    data: c
                }), G_logStatis("", "click_shop_comments")
            }), G_popLayer.refresh(".js-shop-info-flag")
        }), c(".js-shop-info-flag"), G_popLayer.show(".js-shop-info-flag")
    }
    if (b) {
        var f = ['<header class="js-nav-wrap nav-wrap fixed">', '<div class="nav">', '<div class="js-nav-back left">', '<a class="txt" href="javascript:;"><span>back</span></a>', "</div>", '<div class="js-nav-mid-wrap middle center none">', '<div class="js-nav-glist">', '<div class="js-nav-title title omit"></div>', '<div class="js-nav-des des omit"></div>', "</div>", '<div class="js-nav-comm nav-comm none">店铺评论</div>', "</div>", '<div class="js-nav-r-wrap right">', '<span class="js-nav-csch fun csch">分类</span>', '<span class="js-nav-info fun info" data-info="店铺信息" data-sort="筛选">店铺信息</span>', "</div>", "</div>", "</header>"].join("");
        a("#js-viewport").append(f).append('<section class="content"></section>');
        var g = a(".js-nav-back"),
            h = a(".js-nav-csch"),
            i = a(".js-nav-info");
        G_msp_not_show_search && h.addClass("none"), G_msp_not_show_info && i.addClass("none"), g.on("click", function () {
            app.module.Navigation.instance.getStack().getIndex() ? app.navigation.pop() : document.referrer ? history.back() : location.href = "http://m.taobao.com/"
        });
        var j = G_popLayer.content;
        h.on("click", function () {
            !b.cates.cacheData && b.cates.ajax({}, function (a, b) {
                j.find(".js-shop-cates-flag").html(b), G_popLayer.refresh(".js-shop-cates-flag")
            }, function () {
                console.log("店铺类目数据出了点小问题~~")
            }), c(".js-shop-cates-flag"), G_popLayer.show(".js-shop-cates-flag"), G_isIos || window.scrollTo(0, 0), G_logStatis("", "click_shop_inshopsort")
        }), b.cates.action(".js-shop-cates-flag"), j.on("submit", ".js-s-form", function (b) {
            b.preventDefault();
            var c = a.trim(a(".js-s-txt").val());
            d({
                q: encodeURIComponent(c)
            })
        }).on("click", ".js-sc-m-title", function (b) {
            var c = a(b.currentTarget);
            d({
                catId: c.attr("data-id"),
                catTxt: encodeURIComponent(c.text())
            })
        });
        var k = j.find(".js-shop-info"),
            l = j.find(".js-shop-c");
        i.on("click", function (a) {
            i.hasClass("info") ? (e(a), G_logStatis("", "click_shop_shopinfo")) : (c(".js-shop-filter-flag"), G_popLayer.show(".js-shop-filter-flag"), G_logStatis("", "click_shop_listfilter")), G_isIos || window.scrollTo(0, 0)
        })
    }
}($, window.msp),
function (a) {
    var b = {
        name: "index",
        isCollect: "unknow",
        favdo: function (a) {
            var b = this,
                c = lib.login,
                d = $(a.currentTarget).find(".fav-icon");
            "true" == this.isCollect ? (lib.mtop.request({
                api: "com.taobao.favorite.api.deleteCollect",
                v: "1.0",
                data: {
                    infoId: G_msp_shopId + "0"
                }
            }, function () {
                b.isCollect = "false", d.removeClass("h"), notification.simple("取消收藏成功")
            }, function () {
                notification.simple("取消收藏，出错了")
            }), G_logStatis("", "click_shop_cancelfav")) : (lib.mtop.loginedRequest({
                api: "com.taobao.favorite.api.addCollect",
                v: "1.0",
                data: {
                    type: "0",
                    itemId: G_msp_shopId
                }
            }, {
                succ: function () {
                    b.isCollect = "true", d.addClass("h"), notification.simple("收藏成功"), $("#bottom").html(G_bottomhtml()), lib.smartpop.open("shopfav", "taobao://shop.m.taobao.com/shop/shop_index.htm?shop_id=" + G_msp_shopId)
                },
                fail: function (a) {
                    var e = a.errcode;
                    "FAIL_SYS_SESSION_EXPIRED" == e ? c.goLogin({
                        rediUrl: location.href,
                        hideType: !0
                    }) : "SHOP_COLLECT" == e ? (b.isCollect = "true", d.addClass("h"), $("#bottom").html(G_bottomhtml())) : notification.simple(a.message)
                }
            }), G_logStatis("", "click_shop_addfav"))
        },
        rendered: function () {
            function b(a, b) {
                if ("[object Array]" == Object.prototype.toString.call(a.data.itemList)) {
                    var c = a.data.itemList,
                        e = c.length;
                    if (e) {
                        var f = {
                            len: e,
                            rvList: c
                        };
                        b.after(templates.index_recent_view.render(f)), b.css("padding-bottom", "0"), d()
                    }
                }
            }

            function c() {
                var a = document.body.offsetWidth;
                return G_isPad && (a = k.width()), a
            }

            function d() {
                e.calcRv(m), l = new f(".rv-slider", {
                    visible: 3
                })
            }
            var e = this,
                f = window.lib.Slider,
                g = "onorientationchange" in window,
                h = g ? "orientationchange" : "resize";
            e.$el.find(".js-fav-btn").on("click", function (a) {
                e.favdo.call(e, a)
            });
            var i = e.$el.find(".js-msp-md1");
            document.title = i.find(".img-title").find(".title").text();
            var j = 1 == e.$el.find(".msp-md").length,
                k = this.mainEle = e.$el;
            G_isPad && (k = e.$el.find(".js-main")), j ? k.append('<div style="height:200px;line-height:200px;text-align:center;">新店铺开张，店铺装修中</div>') : (k.append('<div class="js-all-gls allg-btn"><a href="#">查看所有宝贝</a></div>'), $(".js-all-gls").on("click", function (b) {
                b.preventDefault(), a.navigation.push("list", {
                    type: "GET",
                    data: {
                        catId: "",
                        catTxt: encodeURIComponent("所有宝贝")
                    }
                })
            })), $(".js-msp-logo").on("click", function () {
                G_msp_not_show_info || $(".js-nav-info").trigger("click")
            }), G_in_server ? lib.login.isLogin() && (lib.mtop.request({
                api: "mtop.favorite.checkUserCollect",
                v: "1.0",
                data: {
                    type: "0",
                    itemId: G_msp_shopId
                }
            }, function (a) {
                e.isCollect = a.data.isCollect, "true" == a.data.isCollect && e.$el.find(".fav-icon").addClass("h")
            }, function () {}), j || lib.mtop.request({
                api: "com.taobao.wireless.shop.recentview.items",
                v: "1.0",
                data: {
                    shopId: G_msp_shopId
                }
            }, function (a) {
                b(a, i)
            }, function () {})) : b(recent_view_data, i);
            var l, m = c();
            e.calcBan(m);
            var n = {
                visible: 1,
                trigger: ".slider-status",
                hasTrigger: !0,
                loop: !0,
                play: !0,
                interval: 3e3
            }, o = new f;
            o.attachTo(".slider", n), $(window).on(h, function () {
                var a = c();
                e.calcBan(a), o.attachTo(".slider", n), e.calcRv(a), l && l.reset({
                    visible: 3
                })
            })
        },
        calcRv: function (a) {
            var b = this,
                c = parseFloat(a),
                d = b.$el.find(".js-rv"),
                e = d.find(".js-rv-des"),
                f = d.find(".rv-slider-outer"),
                g = Math.floor(.21875 * c);
            f.css({
                width: Math.floor(.73125 * c),
                height: g
            }), f.find("li").css({
                width: Math.floor(.24375 * c),
                height: g
            });
            var h = {
                width: g,
                height: g
            };
            f.find("a").css(h), e.css(h)
        },
        calcBan: function (a) {
            var b = this,
                c = parseInt(.95 * parseFloat(a)),
                d = b.$el.find(".slider"),
                e = d.find(".slider-outer"),
                f = parseInt(c / 2),
                g = {
                    width: c,
                    height: f
                };
            d.css(g), e.css(g), e.find("li").css("width", c)
        },
        show: function () {
            if (window.G_pg_name = "index", !G_isPad) {
                var a = $(".js-nav-mid-wrap");
                a.addClass("none"), $(".js-nav-r-wrap").removeClass("none");
                var b = $(".js-nav-info");
                b.removeClass("sort").addClass("info").html(b.attr("data-info")), G_popLayer.content.find(".js-sc-m-title").removeClass("highlight"), "show" == G_popLayer.wrapDiv.attr("p_show") && G_popLayer.hide()
            }
            window.addEventListener("load", function () {
                setTimeout(function () {
                    window.scrollTo(0, 1)
                }, 1)
            }, !1)
        },
        startup: function () {
            var a = this;
            window.G_pg_name = "index", G_isPad && (a.html(a.template()), a.shopInfo()), msp.index_html.ajax({}, function (b) {
                G_isPad ? a.$el.find(".js-main").html(b) : a.html(b), a.rendered(), a.mainEle.find(".js-msp-md2").find("img.lazyimg").each(function () {
                    var a = $(this),
                        b = a.attr("dataimg");
                    a.attr("dataimg", G_setImgSrc(b, "400x400"))
                }), G_isPad ? (msppad.shoplogo = $(".js-msp-logo").find("img").attr("src"), a.$el.find("#js-si-img-logo").attr("src", msppad.shoplogo), msppad.replace(a.$el)) : window.lazyload.init()
            })
        }
    };
    G_isPad && $.extend(b, msppad.index_comment), a.definePage(b)
}(window.app),
function (a) {
    var b = {
        name: "list",
        route: "list",
        show: function () {
            if (window.G_pg_name = "goodsList", !G_isPad) {
                $(".js-nav-mid-wrap").removeClass("none").removeClass("center").find(".js-nav-glist").removeClass("none").siblings(".js-nav-comm").addClass("none"), $(".js-nav-r-wrap").removeClass("none");
                var a = $(".js-nav-info");
                a.removeClass("info").addClass("sort").html(a.attr("data-sort"))
            }
            window.scrollTo(0, 1)
        },
        mainHtm: function () {
            var a, b = ['<div class="js-nav-glist pad-gl-des">', '<div class="js-nav-title title omit"></div>', '<div class="js-nav-des des omit"></div>', "</div>"].join(""),
                c = ['<form class="js-filter-form pad-gl-filter">', '<div class="condi">', '<input class="js-start-price inp" type="text" placeholder="最低价" value="" />元~', '<input class="js-end-price inp" type="text" placeholder="最高价" value="" />元', "</div>", '<div class="finish clearfix">', '<input class="js-filter-submit fin-btn" type="submit" value="完成" />', "</div>", "</form>"].join(""),
                d = ['<ul class="g-tab" id="js-gl-sort">', '<li data="oldstarts" class="cur">上新</li>', '<li data="hotsell">销量</li>', '<li data="bid" class="price-flag up">价格</li>', '<li data="isPromotion">促销</li>', "</ul>", "</div>"].join(""),
                e = '<div class="js-goods-list goods-list"></div>',
                f = '<div id="gl-pagenav"></div>';
            if (G_isPad) {
                d = '<div class="pad-gl-nav">' + d;
                var g = '<div class="pad-gl-top clearfix">' + b + d + c + "</div>";
                a = '<div class="goods-list-pg-wrap">' + g + e + f + "</div>"
            } else d = '<div class="sub-nav pad-gl-nav">' + d, a = '<div class="goods-list-pg-wrap">' + d + e + f + "</div>";
            return a
        },
        format_url: function (a) {
            var a = $.extend({}, a);
            return a.currentPage || (a.currentPage = 1), a.hasOwnProperty("q") && (a.q = decodeURIComponent(a.q)), !a.hasOwnProperty("sort") && !a.hasOwnProperty("isPromotion") && (a.sort = "oldstarts"), !a.hasOwnProperty("q") && !a.hasOwnProperty("catId") && (a.q = ""), a
        },
        change_state: function (a) {
            var b = this,
                a = $.extend({}, a),
                c = a.q;
            a.hasOwnProperty("q") && !a.q && (c = "所有宝贝");
            var d, e;
            G_isPad ? (e = b.$el, d = e.find(".js-nav-title")) : (d = $(".js-nav-title"), e = G_popLayer.content), d.text(decodeURIComponent(c || a.catTxt || " ")), "undefined" != typeof a.q ? (e.find(".js-s-txt").val(decodeURIComponent(a.q)), e.find(".js-sc-m-title").each(function () {
                $(this).removeClass("highlight")
            })) : "undefined" != typeof a.catId && e.find(".js-sc-m-title").each(function (b, c) {
                var d = $(c);
                d.attr("data-id") == a.catId ? d.addClass("highlight") : d.removeClass("highlight")
            }), b.$el.find("#js-gl-sort").find("li").each(function () {
                var b = $(this),
                    c = b.attr("data");
                (c == a.sort || "isPromotion" == c && a.hasOwnProperty("isPromotion") || "bid" == c && "_bid" == a.sort) && (b.addClass("cur"), b.siblings().removeClass("cur")), "bid" == c && "_bid" == a.sort && (b.addClass("down"), b.removeClass("up"))
            })
        },
        renderItem: function (a, b) {
            var c = this,
                d = b,
                e = c.pg,
                f = c.goodsListItems;
            "init" == d || "sort" == d || "filter" == d ? (e.eventDetach(), e.init({
                index: 1,
                pageCount: Math.ceil(a.totalResults / a.pageSize),
                disableHash: !0
            }), $(".js-nav-des").text(a.totalResults + "个宝贝")) : e.setIndex(a.currentPage), f.render(a), setTimeout(function () {
                G_isPad ? msppad.replace(c.$el, "210x210") : lazyload.img.trigger(), window.scrollTo(0, 1)
            }, 500)
        },
        bind_domEvt: function () {
            function a(a) {
                var c = a,
                    d = b.urlData;
                switch ("isPromotion" == c ? ($.extend(d, {
                    isPromotion: "true",
                    currentPage: 1
                }), delete d.sort) : (delete d.isPromotion, $.extend(d, {
                    sort: c,
                    currentPage: 1
                })), msp.goods_list.ajax(d, function (a) {
                    b.renderItem(a, "sort")
                }), c) {
                case "oldstarts":
                    G_logStatis("", "click_shop_new");
                    break;
                case "hotsell":
                    G_logStatis("", "click_shop_sale");
                    break;
                case "bid":
                    G_logStatis("", "click_shop_priceasc");
                    break;
                case "_bid":
                    G_logStatis("", "click_shop_pricedesc");
                    break;
                case "isPromotion":
                }
            }
            var b = this,
                c = b.$mainWrap;
            c.find("#js-gl-sort").on("click", "li", function (b) {
                var c = $(b.currentTarget);
                c.addClass("cur"), c.siblings("li").removeClass("cur"), c.hasClass("price-flag") ? c.hasClass("up") ? (c.removeClass("up"), c.addClass("down"), c.attr("data", "_bid")) : (c.removeClass("down"), c.addClass("up"), c.attr("data", "bid")) : c.siblings(".price-flag").removeClass("up").removeClass("down"), a(c.attr("data"))
            });
            var d;
            d = G_isPad ? c : G_popLayer.content;
            var e = function (a, b) {
                return a || b ? a && !/^[0-9.]+$/.test(a) || b && !/^[0-9.]+$/.test(b) ? (notification.simple("请输入数字"), !1) : !0 : (notification.simple("请输入价格"), !1)
            };
            d.find(".js-filter-form").on("submit", function (a) {
                a.preventDefault();
                var c = $.trim($(".js-start-price").val()),
                    d = $.trim($(".js-end-price").val());
                if (e(c, d)) {
                    var f = {};
                    c && (f.startPrice = parseFloat(c)), d && (f.endPrice = parseFloat(d)), delete b.urlData.startPrice, delete b.urlData.endPrice;
                    var g = b.urlData;
                    $.extend(g, f), msp.goods_list.ajax(g, function (a) {
                        b.renderItem(a, "filter")
                    }), G_isPad || G_popLayer.hide()
                }
            });
            var f = b.$el.find("#gl-pagenav");
            b.pg = new lib.PageNav(f, {
                pageCount: 1,
                disableHash: !0
            }), b.pg.$container.on("P:switchPage", function (a, d) {
                G_isPad ? c[0].scrollTop = 0 : window.scrollTo(0, 1);
                var e = b.urlData;
                $.extend(e, {
                    currentPage: d.index
                }), msp.goods_list.ajax(e, function (a) {
                    b.renderItem(a, "pagenav")
                })
            })
        },
        startup: function () {
            var b = this;
            window.G_pg_name = "goodsList";
            var c = b.format_url(a.navigation.getParameters()),
                d = b.mainHtm(),
                e = b.$el;
            G_isPad ? (b.html(b.template()), e = b.$el.find(".js-main"), e.html(d), b.showCates()) : b.html(d), b.change_state(c), this.$mainWrap = e, this.goodsListItems = a.getView("goodsListItem"), e.find(".js-goods-list").append(this.goodsListItems.el), this.urlData = c, b.bind_domEvt(), msp.goods_list.ajax(c, function (a) {
                b.renderItem(a, "init")
            }), G_isPad ? msppad.replace(b.$el, "210x210") : window.lazyload.init({
                definition: !0,
                size: "210x210"
            })
        }
    };
    G_isPad && $.extend(b, msppad.list), a.definePage(b)
}(window.app),
function (a) {
    a.extendView({
        name: "goodsListItem",
        el: "ul#js-goods-list-items.goods-list-items",
        render: function (a, b) {
            var c = {};
            $.extend(!0, c, a), c.itemsArray && c.itemsArray.forEach(function (a) {
                a.salePrice = "￥" + a.salePrice, a.reservePrice = "￥" + a.reservePrice, a.salePrice == a.reservePrice && (a.reservePrice = ""), "￥" == a.salePrice && (a.salePrice = a.reservePrice, a.reservePrice = "")
            }), this.$el.html(templates.goods_list_item.render(c)), b && b()
        }
    })
}(window.app),
function (a) {
    var b = {
        name: "comments",
        route: "comments",
        show: function () {
            if (window.G_pg_name = "comments", !G_isPad) {
                var a = $(".js-nav-mid-wrap");
                a.removeClass("none").addClass("center").find(".js-nav-glist").addClass("none").siblings(".js-nav-comm").removeClass("none"), $(".js-nav-r-wrap").addClass("none"), G_popLayer && "show" == G_popLayer.wrapDiv.attr("p_show") && G_popLayer.hide()
            }
            window.scrollTo(0, 1)
        },
        startup: function () {
            function b(a) {
                i.render(a), "nav" == j ? (m.eventDetach(), m.init({
                    index: 1,
                    pageCount: Math.ceil(a.totalResults / a.pageSize),
                    disableHash: !0
                })) : (n && (m.eventDetach(), m.init({
                    index: 1,
                    pageCount: Math.ceil(a.totalResults / a.pageSize),
                    disableHash: !0
                }), n = !1), m.setIndex(a.currentPage))
            }

            function c() {
                o.replaceWith('<div class="comment-tmall-txt">买家评论</div>')
            }
            var d = this;
            window.G_pg_name = "comments";
            var e = '<div class="comments-pg-wrap"><ul class="js-comm-nav comment-nav"></ul><div class="js-comment-list comment-list"></div><div id="comm-pagenav"></div></div>',
                f = d.$el;
            G_isPad ? (d.html(d.template()), f = d.$el.find(".js-main"), f.html(e), d.shopInfo()) : d.html(e);
            var g = function (a) {
                var b = templates.comments_nav.render(a);
                f.find(".js-comm-nav").html(b)
            }, h = a.navigation.getParameters();
            h && h.hasOwnProperty("goodSeller") && h.hasOwnProperty("neutralSeller") && h.hasOwnProperty("badSeller") ? g(msp.commNum.dataOpe(h)) : msp.commNum.ajax({}, function (a, b) {
                g(b)
            });
            var i = a.getView("commentsItem");
            this.$el.find(".js-comment-list").append(i.el);
            var j, k = "2",
                l = d.$el.find("#comm-pagenav"),
                m = new lib.PageNav(l, {
                    pageCount: 1,
                    disableHash: !0
                }),
                n = !0,
                o = this.$el.find(".js-comm-nav");
            o.on("click", "li", function (a) {
                var c = $(a.currentTarget);
                c.addClass("sel"), c.siblings().removeClass("sel"), "0" != c.attr("n") ? (k = c.attr("s"), j = "nav", m.$container.show(), msp.comments_list.ajax({
                    rateResult: k,
                    pageNo: 1
                }, function (a) {
                    b(a[k][1])
                })) : (m.$container.hide(), i.render({
                    rateList: []
                }))
            });
            var p;
            "undefined" != typeof G_isMall && (p = G_isMall);
            var q = $.type(p),
                r = {
                    rateResult: k,
                    pageNo: 1
                };
            "undefined" == q ? $.extend(r, {
                requireMall: !0
            }) : "boolean" == q && p && c(), msp.comments_list.ajax(r, function (a) {
                var d = a[k][1];
                b(d), r.hasOwnProperty("requireMall") && (p = d.isMall, "true" == p && c()), 0 == parseInt(d.totalResults) && f.find("#comm-pagenav").hide()
            }), m.$container.on("P:switchPage", function (a, c) {
                j = "pagenav", G_isPad ? f[0].scrollTop = 0 : window.scrollTo(0, 1), msp.comments_list.ajax({
                    rateResult: k,
                    pageNo: c.index
                }, function (a) {
                    b(a[k][c.index])
                })
            })
        }
    };
    G_isPad && $.extend(b, msppad.index_comment), a.definePage(b)
}(window.app),
function (a) {
    a.extendView({
        name: "commentsItem",
        el: "ul#js-comments-items.comments-items",
        render: function (a, b) {
            this.$el.html(templates.comments_item.render(a)), b && b()
        },
        destroy: function () {}
    })
}(window.app),
function (a) {
    "use strict";

    function b(a) {
        var b = $(a.target);
        b.parents(".js-side").length || b.hasClass("js-side") || b.parents(".js-main").length || b.hasClass("js-main") || a.preventDefault()
    }
    G_isPad && ($("#js-viewport").append('<section class="content"></section>'), $(document).on("click", ".js-nav-back", function () {
        a.module.Navigation.instance.getStack().getIndex() ? a.navigation.pop() : document.referrer ? history.back() : location.href = "http://m.taobao.com/"
    }).on("click", ".js-nav-info", function () {
        a.navigation.push("index"), G_logStatis("", "click_shop_shopinfo")
    }).on("click", ".js-nav-csch", function () {
        a.navigation.push("list"), G_logStatis("", "click_shop_inshopsort")
    }).on("touchmove", b)), a.start()
}(window.app);